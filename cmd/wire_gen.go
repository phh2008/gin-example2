// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"com.example/example/bootstrap"
	"com.example/example/manager"
	"com.example/example/pkg/cache"
	"com.example/example/pkg/config"
	"com.example/example/pkg/orm"
	"com.example/example/pkg/xjwt"
	"com.example/example/repository"
	"com.example/example/service"
	"com.example/example/web/controller"
	"com.example/example/web/middleware"
	"com.example/example/web/router"
)

// Injectors from wire.go:

func BuildServer(conf *config.Config) *bootstrap.Server {
	db := orm.NewDB(conf)
	engine := bootstrap.NewGin()
	helloController := controller.NewHelloController()
	jwtHelper := xjwt.NewJwtHelper(conf)
	storage := cache.NewMemeryStorage()
	userRoleRepository := repository.NewUserRoleRepository(db)
	permissionRepository := repository.NewPermissionRepository(db)
	authorizeManager := manager.NewAuthorizeManager(storage, userRoleRepository, permissionRepository)
	auth := middleware.NewAuth(jwtHelper, authorizeManager)
	userRepository := repository.NewUserRepository(db)
	userService := service.NewUserService(userRepository, userRoleRepository, authorizeManager, jwtHelper)
	userController := controller.NewUserController(userService)
	permissionService := service.NewPermissionService(permissionRepository)
	permissionController := controller.NewPermissionController(permissionService)
	roleRepository := repository.NewRoleRepository(db)
	rolePermissionRepository := repository.NewRolePermissionRepository(db)
	roleService := service.NewRoleService(roleRepository, rolePermissionRepository, permissionRepository, userRoleRepository, userRepository, authorizeManager)
	roleController := controller.NewRoleController(roleService, userService)
	routerRouter := &router.Router{
		Engine:        engine,
		HelloApi:      helloController,
		Auth:          auth,
		UserApi:       userController,
		PermissionApi: permissionController,
		RoleApi:       roleController,
	}
	server := &bootstrap.Server{
		Config: conf,
		DB:     db,
		Router: routerRouter,
		Engine: engine,
	}
	return server
}
